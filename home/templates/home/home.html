{% extends "home/base.html" %}
{% block title %}Strona powitalna{% endblock %}
{% load i18n %}

{% block content %}

{% if not user.is_authenticated %}
	<div class="container">

		<p>{{ start.text|safe }}</p>

		<div class="row rounded">
			<div class="col-md-3">
				<a href="{% url 'login' %}" class="btn btn-primary btn-block m-2 btn-sm d-flex justify-content-around">{% trans 'Login' %}</a>
			</div>
			<div class="col-md-3">
				<a href="{% url 'account_signup' %}" class="btn btn-primary btn-block m-2 btn-sm d-flex justify-content-around">{% trans 'Sign Up' %}</a>
			</div>
			<div class="col-md-3">
				<a href="{% url 'password_reset' %}" class="btn btn-primary btn-block m-2 btn-sm d-flex justify-content-around">{% trans 'Reset password' %}</a>
			</div>
			<div class="col-md-3">
				<a href=https://wikikracja.pl/kontakt/ target="_blank" class="btn btn-primary btn-block m-2 btn-sm d-flex justify-content-around">{% trans 'Send message to developer' %}</a>		
			</div>
		</div>
	</div>
{% endif %}

{% if user.is_authenticated %}
<div class="col-sm-12">
	<p>
		<h4>{% trans 'Ongoing referenda' %}:</h4>
		<ul class="list-group">
			{% for i in ongoing %}
				<a href="glosowania/details/{{ i.pk }}" class="list-group-item">{{ i.title }}<br><u>{% trans 'End' %}: {{ i.data_referendum_stop|date:"Y-m-d" }}</u></a>
				{% empty %}
					<div class="alert alert-primary">({% trans 'None' %})</div>
			{% endfor %}
		</ul>
	</p>

	<p>
		<h4>{% trans 'Upcoming referenda' %}:</h4>
		<ul class="list-group">
			{% for i in upcoming %}
				<a href="glosowania/details/{{ i.pk }}" class="list-group-item">{{ i.title }}<br><u>{% trans 'Start' %}: {{ i.data_referendum_start|date:"Y-m-d" }}</u></a>
				{% empty %}
				<div class="alert alert-primary">({% trans 'None' %})</div>
			{% endfor %}
		</ul>
	</p>

	<p>
		<h4>{% trans 'Gathering signatures' %}:</h4>
		<ul class="list-group">
			{% for i in signatures %}
				<a href="glosowania/details/{{ i.pk }}" class="list-group-item">{{ i.title }}<br><u>{% trans 'Date of creation' %}: {{ i.data_powstania|date:"Y-m-d" }}</u></a>
				{% empty %}
				<div class="alert alert-primary">({% trans 'None' %})</div>
			{% endfor %}
		</ul>
	</p>

<hr>

	<p>
		<h4>{% trans 'New people' %}:</h4>
		<ul class="list-group">
		{% for i in people %}
			<a href="obywatele/{{ i.pk }}" class="list-group-item">{{ i.uid }} | {% trans "Since" %}: {{ i.data_przyjecia|date:"Y-m-d" }}</a>
			{% empty %}
			<div class="alert alert-primary">({% trans 'None' %})</div>
		{% endfor %}
		</ul>
	</p>

	<p>
		<h4>{% trans 'Waiting people' %}:</h4>
		<ul class="list-group">
		{% for i in people_waiting %}
			<a href="obywatele/{{ i.pk }}" class="list-group-item">{{ i.username }} | {% trans "Since" %}: {{ i.date_joined|date:"Y-m-d" }}</a>
			{% empty %}
			<div class="alert alert-primary">({% trans 'None' %})</div>
		{% endfor %}
		</ul>
	</p>

<hr>

	<p>
		<h4>{% trans 'Updated posts' %}:</h4>
		<ul class="list-group">
		{% for i in posts|dictsortreversed:"updated" %}
			<a href="{% url 'board:view_post' i.pk %}" class="list-group-item">{{ i.title }} | {% if i.is_public %} {% trans 'Public' %} {% else %} {% trans 'Private' %} {% endif %} | {% trans "Updated" %}: {{ i.updated|date:"Y-m-d" }}</a>
			{% empty %}
			<div class="alert alert-primary">({% trans 'None' %})</div>
		{% endfor %}
		</ul>
	</p>
</div>
{% endif %}
{% endblock %}
